---
import Layout from '../layouts/Layout.astro';
import {createClient} from '@sanity/client'
import {PortableText} from 'astro-portabletext'

const client = createClient({
  projectId: 'vdcrzio7',
  dataset: 'production',
  apiVersion: '2025-01-01',
  useCdn: true,
})

const query = `*[_type=="post"]|order(_createdAt desc)[0]{title, body}`
const post = await client.fetch(query)
---

<Layout title="会社サイト" description="会社サイトのホームページです。">
  <div style="margin: 2rem auto; max-width: 920px; padding: 1rem;">
    <h1>最新記事</h1>

    {post ? (
      <>
        <h2>{post.title}</h2>
        <PortableText value={post.body} />
      </>
    ) : (
      <p>まだ記事がありません。</p>
    )}

    <p style="margin-top:2rem;">
      <a href="/blog">ブログ一覧へ</a> | 
      <a href="/contact">お問い合わせ</a>
    </p>
  </div>
</Layout>
