---
import Base from '../layouts/Base.astro';
import { Image } from 'astro:assets';
import {createClient} from '@sanity/client'

// ç”»åƒã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import heroImage from '../assets/images/hero-bg.svg';
import serviceWebImage from '../assets/images/service-web.svg';
import serviceSystemImage from '../assets/images/service-system.svg';
import serviceConsultingImage from '../assets/images/service-consulting.svg';

const client = createClient({
  projectId: 'vdcrzio7',
  dataset: 'production',
  apiVersion: '2025-01-01',
  useCdn: true,
})

// æœ€æ–°è¨˜äº‹ã‚’3ä»¶å–å¾—
const posts = await client.fetch(`
  *[_type=="post"]|order(_createdAt desc)[0..2]{
    title,
    "slug": slug.current,
    _createdAt
  }
`)

const services = [
  {
    title: 'Webã‚µã‚¤ãƒˆåˆ¶ä½œ',
    description: 'æœ€æ–°æŠ€è¡“ã‚’æ´»ç”¨ã—ãŸé«˜å“è³ªãªWebã‚µã‚¤ãƒˆã‚’åˆ¶ä½œã—ã¾ã™ã€‚ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã©ã®ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚å¿«é©ãªä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚',
    icon: 'ğŸŒ',
    image: serviceWebImage
  },
  {
    title: 'ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º',
    description: 'ãŠå®¢æ§˜ã®ãƒ“ã‚¸ãƒã‚¹ã«æœ€é©ãªã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆãƒ»é–‹ç™ºã—ã¾ã™ã€‚æ¥­å‹™åŠ¹ç‡åŒ–ã‚’å®Ÿç¾ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚',
    icon: 'âš™ï¸',
    image: serviceSystemImage
  },
  {
    title: 'ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°',
    description: 'DXæ¨é€²ã‚„ITæˆ¦ç•¥ç«‹æ¡ˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚è±Šå¯ŒãªçµŒé¨“ã‚’æ´»ã‹ã—ã¦ã€æœ€é©ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚',
    icon: 'ğŸ’¡',
    image: serviceConsultingImage
  }
]

// Organizationæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
const baseUrl = Astro.site?.href || 'https://example.com';
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "æ ªå¼ä¼šç¤¾ãƒ†ãƒƒã‚¯ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³",
  "url": baseUrl,
  "logo": `${baseUrl}/favicon.svg`,
  "description": "æœ€æ–°æŠ€è¡“ã‚’æ´»ç”¨ã—ãŸWebã‚µã‚¤ãƒˆåˆ¶ä½œã€ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã€ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚",
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "JP",
    "addressRegion": "æ±äº¬éƒ½",
    "addressLocality": "åƒä»£ç”°åŒº",
    "postalCode": "100-0001",
    "streetAddress": "åƒä»£ç”°1-1-1"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+81-3-1234-5678",
    "contactType": "customer service",
    "areaServed": "JP",
    "availableLanguage": "Japanese"
  },
  "sameAs": [
    // SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚Œã°ã“ã“ã«è¿½åŠ 
    // "https://twitter.com/yourcompany",
    // "https://www.facebook.com/yourcompany"
  ]
};
---

<Base title="ä¼šç¤¾ã‚µã‚¤ãƒˆ | ãƒ‡ã‚¸ã‚¿ãƒ«ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼" description="æœ€æ–°æŠ€è¡“ã‚’æ´»ç”¨ã—ãŸWebã‚µã‚¤ãƒˆåˆ¶ä½œã€ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã€ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚">
  {/* Organizationæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ */}
  <script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
  
  <!-- Hero Section -->
  <section class="relative py-16 text-center overflow-hidden -mx-6 px-6">
    {/* HeroèƒŒæ™¯ç”»åƒ - loading="eager"ã§LCPæœ€é©åŒ–ã€fetchpriority="high"ã§å„ªå…ˆèª­ã¿è¾¼ã¿ */}
    <div class="absolute inset-0 -z-10">
      <Image 
        src={heroImage} 
        alt="" 
        width={1200}
        height={600}
        loading="eager"
        fetchpriority="high"
        class="w-full h-full object-cover"
      />
    </div>
    
    <div class="relative z-10">
      <h1 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
        ãƒ‡ã‚¸ã‚¿ãƒ«ã®åŠ›ã§<br />ãƒ“ã‚¸ãƒã‚¹ã‚’åŠ é€Ÿã•ã›ã‚‹
      </h1>
      <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
        æœ€æ–°æŠ€è¡“ã¨ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªç™ºæƒ³ã§ã€ãŠå®¢æ§˜ã®ãƒ“ã‚¸ãƒã‚¹èª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
      </p>
      <div class="flex gap-4 justify-center">
        <a href="/services" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-lg transition-colors duration-200">
          ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§
        </a>
        <a href="/contact" class="border-2 border-blue-600 text-blue-600 hover:bg-blue-50 font-semibold px-8 py-3 rounded-lg transition-colors duration-200">
          ãŠå•ã„åˆã‚ã›
        </a>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="py-16 bg-gray-50 -mx-6 px-6 rounded-lg">
    <h2 class="text-3xl font-bold text-center mb-12">ã‚µãƒ¼ãƒ“ã‚¹</h2>
    <div class="grid md:grid-cols-3 gap-8">
      {services.map((service) => (
        <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden">
          {/* ã‚µãƒ¼ãƒ“ã‚¹ç”»åƒ - loading="lazy"ã§é…å»¶èª­ã¿è¾¼ã¿ã€width/heightã§CLSå¯¾ç­– */}
          <div class="relative h-48 bg-gray-100">
            <Image 
              src={service.image} 
              alt={`${service.title}ã®ã‚¤ãƒ¡ãƒ¼ã‚¸`}
              width={400}
              height={300}
              loading="lazy"
              class="w-full h-full object-cover"
            />
          </div>
          <div class="p-8">
            <div class="text-4xl mb-4">{service.icon}</div>
            <h3 class="text-xl font-semibold mb-3">{service.title}</h3>
            <p class="text-gray-600 mb-4">{service.description}</p>
          </div>
        </div>
      ))}
    </div>
    <div class="text-center mt-12">
      <a href="/services" class="text-blue-600 hover:text-blue-800 font-semibold">
        ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¦‹ã‚‹ â†’
      </a>
    </div>
  </section>

  <!-- Latest Blog Posts -->
  {posts.length > 0 && (
    <section class="py-16">
      <h2 class="text-3xl font-bold mb-8">æœ€æ–°è¨˜äº‹</h2>
      <div class="grid md:grid-cols-3 gap-6">
        {posts.map((post: any) => (
          <a href={`/blog/${post.slug}`} class="block p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow group">
            <h3 class="text-xl font-semibold mb-2 group-hover:text-blue-600 transition-colors">
              {post.title}
            </h3>
            <time class="text-sm text-gray-500">
              {new Date(post._createdAt).toLocaleDateString('ja-JP')}
            </time>
          </a>
        ))}
      </div>
      <div class="text-center mt-8">
        <a href="/blog" class="text-blue-600 hover:text-blue-800 font-semibold">
          ãƒ–ãƒ­ã‚°ä¸€è¦§ã‚’è¦‹ã‚‹ â†’
        </a>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  <section class="py-16 bg-blue-600 text-white -mx-6 px-6 rounded-lg text-center">
    <h2 class="text-3xl font-bold mb-4">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã¾ã—ã‚‡ã†</h2>
    <p class="text-xl mb-8 opacity-90">
      ãŠå®¢æ§˜ã®ãƒ“ã‚¸ãƒã‚¹èª²é¡Œã«ã¤ã„ã¦ã€ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
    </p>
    <a href="/contact" class="inline-block bg-white text-blue-600 hover:bg-gray-100 font-semibold px-8 py-3 rounded-lg transition-colors duration-200">
      ç„¡æ–™ç›¸è«‡ã¯ã“ã¡ã‚‰
    </a>
  </section>
</Base>
