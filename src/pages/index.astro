---
import Base from '../layouts/Base.astro';
import {createClient} from '@sanity/client'
import {PortableText} from 'astro-portabletext'

const client = createClient({
  projectId: 'vdcrzio7',
  dataset: 'production',
  apiVersion: '2025-01-01',
  useCdn: true,
})

const query = `*[_type=="post"]|order(_createdAt desc)[0]{title, body}`
const post = await client.fetch(query)
---

<Base title="会社サイト" description="会社サイトのホームページです。">
  <div class="prose max-w-none">
    <h1 class="text-3xl font-bold mb-6">最新記事</h1>

    {post ? (
      <>
        <h2 class="text-2xl font-semibold mt-8 mb-4">{post.title}</h2>
        <div class="mt-4">
          <PortableText value={post.body} />
        </div>
      </>
    ) : (
      <p class="text-gray-600">まだ記事がありません。</p>
    )}
  </div>
</Base>
